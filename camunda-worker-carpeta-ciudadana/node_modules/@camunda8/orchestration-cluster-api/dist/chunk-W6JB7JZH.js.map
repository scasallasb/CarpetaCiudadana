{"version":3,"sources":["../src/runtime/logger.ts"],"sourcesContent":["// Per-client logger (no global singleton). Construct via createLogger.\n\n// Added 'silly' for deep diagnostics (unsafe: logs HTTP bodies when enabled elsewhere)\nexport type LogLevel = 'silent' | 'error' | 'warn' | 'info' | 'debug' | 'trace' | 'silly';\nexport interface LogEvent {\n  level: LogLevel;\n  scope: string;\n  ts: number;\n  args: any[];\n  code?: string;\n  data?: any;\n}\nexport type LogTransport = (e: LogEvent) => void;\nconst ORDER: Record<LogLevel, number> = {\n  silent: 0,\n  error: 1,\n  warn: 2,\n  info: 3,\n  debug: 4,\n  trace: 5,\n  silly: 6,\n};\n\nexport interface Logger {\n  level(): LogLevel;\n  setLevel(level: LogLevel): void; // internal use\n  setTransport(t?: LogTransport): void; // internal use\n  error(...a: any[]): void;\n  warn(...a: any[]): void;\n  info(...a: any[]): void;\n  debug(...a: any[]): void;\n  trace(...a: any[]): void;\n  silly(...a: any[]): void;\n  scope(child: string): Logger;\n  code(level: LogLevel, code: string, msg: string, data?: any): void;\n}\n\nexport interface CreateLoggerOptions {\n  level?: LogLevel;\n  transport?: LogTransport;\n  scope?: string;\n}\n\nexport function createLogger(opts: CreateLoggerOptions = {}): Logger {\n  let currentLevel: LogLevel = opts.level || 'error';\n  let transport: LogTransport | undefined = opts.transport;\n  const baseScope = opts.scope || '';\n\n  function isEnabled(need: LogLevel) {\n    return ORDER[currentLevel] >= ORDER[need];\n  }\n  function evalArgs(args: any[]): any[] {\n    // Support lazy function args: if an arg is a function with zero arity, call it.\n    return args.map((a) => (typeof a === 'function' && a.length === 0 ? a() : a)).flat();\n  }\n  function emit(level: LogLevel, scope: string, rawArgs: any[]) {\n    if (!isEnabled(level)) return;\n    const args = evalArgs(rawArgs);\n    const evt: LogEvent = { level, scope, ts: Date.now(), args };\n    if (transport) {\n      try {\n        transport(evt);\n      } catch {\n        /* ignore transport errors */\n      }\n    } else {\n      const tag = `[camunda-sdk][${level}]${scope ? `[${scope}]` : ''}`;\n      const method = level === 'error' ? 'error' : level === 'warn' ? 'warn' : 'log';\n      // eslint-disable-next-line no-console\n      console[method](tag, ...args);\n    }\n  }\n  function emitCode(level: LogLevel, scope: string, code: string, msg: string, data?: any) {\n    if (!isEnabled(level)) return;\n    const evt: LogEvent = { level, scope, ts: Date.now(), args: [msg], code, data };\n    if (transport) {\n      try {\n        transport(evt);\n        // eslint-disable-next-line no-empty\n      } catch {}\n    } else {\n      const tag = `[camunda-sdk][${level}]${scope ? `[${scope}]` : ''}`;\n      const method = level === 'error' ? 'error' : level === 'warn' ? 'warn' : 'log';\n      // eslint-disable-next-line no-console\n      console[method](tag, code + ':', msg, data ?? '');\n    }\n  }\n  const make = (scope: string): Logger => ({\n    level: () => currentLevel,\n    setLevel(l: LogLevel) {\n      currentLevel = l;\n    },\n    setTransport(t?: LogTransport) {\n      transport = t;\n    },\n    error: (...a: any[]) => emit('error', scope, a),\n    warn: (...a: any[]) => emit('warn', scope, a),\n    info: (...a: any[]) => emit('info', scope, a),\n    debug: (...a: any[]) => emit('debug', scope, a),\n    trace: (...a: any[]) => emit('trace', scope, a),\n    silly: (...a: any[]) => emit('silly', scope, a),\n    scope(child: string) {\n      return make(scope ? `${scope}:${child}` : child);\n    },\n    code(l: LogLevel, code: string, msg: string, data?: any) {\n      emitCode(l, scope, code, msg, data);\n    },\n  });\n  return make(baseScope);\n}\n"],"mappings":";;;;;;;;;;;;;AAaA,IAAM,QAAkC;AAAA,EACtC,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAO;AAAA,EACP,OAAO;AAAA,EACP,OAAO;AACT;AAsBO,SAAS,aAAa,OAA4B,CAAC,GAAW;AACnE,MAAI,eAAyB,KAAK,SAAS;AAC3C,MAAI,YAAsC,KAAK;AAC/C,QAAM,YAAY,KAAK,SAAS;AAEhC,WAAS,UAAU,MAAgB;AACjC,WAAO,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,EAC1C;AACA,WAAS,SAAS,MAAoB;AAEpC,WAAO,KAAK,IAAI,CAAC,MAAO,OAAO,MAAM,cAAc,EAAE,WAAW,IAAI,EAAE,IAAI,CAAE,EAAE,KAAK;AAAA,EACrF;AACA,WAAS,KAAK,OAAiB,OAAe,SAAgB;AAC5D,QAAI,CAAC,UAAU,KAAK,EAAG;AACvB,UAAM,OAAO,SAAS,OAAO;AAC7B,UAAM,MAAgB,EAAE,OAAO,OAAO,IAAI,KAAK,IAAI,GAAG,KAAK;AAC3D,QAAI,WAAW;AACb,UAAI;AACF,kBAAU,GAAG;AAAA,MACf,QAAQ;AAAA,MAER;AAAA,IACF,OAAO;AACL,YAAM,MAAM,iBAAiB,KAAK,IAAI,QAAQ,IAAI,KAAK,MAAM,EAAE;AAC/D,YAAM,SAAS,UAAU,UAAU,UAAU,UAAU,SAAS,SAAS;AAEzE,cAAQ,MAAM,EAAE,KAAK,GAAG,IAAI;AAAA,IAC9B;AAAA,EACF;AACA,WAAS,SAAS,OAAiB,OAAe,MAAc,KAAa,MAAY;AACvF,QAAI,CAAC,UAAU,KAAK,EAAG;AACvB,UAAM,MAAgB,EAAE,OAAO,OAAO,IAAI,KAAK,IAAI,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,KAAK;AAC9E,QAAI,WAAW;AACb,UAAI;AACF,kBAAU,GAAG;AAAA,MAEf,QAAQ;AAAA,MAAC;AAAA,IACX,OAAO;AACL,YAAM,MAAM,iBAAiB,KAAK,IAAI,QAAQ,IAAI,KAAK,MAAM,EAAE;AAC/D,YAAM,SAAS,UAAU,UAAU,UAAU,UAAU,SAAS,SAAS;AAEzE,cAAQ,MAAM,EAAE,KAAK,OAAO,KAAK,KAAK,QAAQ,EAAE;AAAA,IAClD;AAAA,EACF;AACA,QAAM,OAAO,CAAC,WAA2B;AAAA,IACvC,OAAO,MAAM;AAAA,IACb,SAAS,GAAa;AACpB,qBAAe;AAAA,IACjB;AAAA,IACA,aAAa,GAAkB;AAC7B,kBAAY;AAAA,IACd;AAAA,IACA,OAAO,IAAI,MAAa,KAAK,SAAS,OAAO,CAAC;AAAA,IAC9C,MAAM,IAAI,MAAa,KAAK,QAAQ,OAAO,CAAC;AAAA,IAC5C,MAAM,IAAI,MAAa,KAAK,QAAQ,OAAO,CAAC;AAAA,IAC5C,OAAO,IAAI,MAAa,KAAK,SAAS,OAAO,CAAC;AAAA,IAC9C,OAAO,IAAI,MAAa,KAAK,SAAS,OAAO,CAAC;AAAA,IAC9C,OAAO,IAAI,MAAa,KAAK,SAAS,OAAO,CAAC;AAAA,IAC9C,MAAM,OAAe;AACnB,aAAO,KAAK,QAAQ,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK;AAAA,IACjD;AAAA,IACA,KAAK,GAAa,MAAc,KAAa,MAAY;AACvD,eAAS,GAAG,OAAO,MAAM,KAAK,IAAI;AAAA,IACpC;AAAA,EACF;AACA,SAAO,KAAK,SAAS;AACvB;","names":[]}